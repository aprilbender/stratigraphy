<div id="ajaxContentParent">
    <div id="ajaxContent">
        <p>Loading Image...</p>
    </div>
</div>
<script>
    const svgUrl = 'https://raw.githubusercontent.com/aprilbender/stratigraphy/master/Coal_Compressed.svg';

    var Webflow = Webflow || [];
    let origWindowWidth = undefined;

    let loadMondoSvg = () => {
        $.ajax({
            url: svgUrl,
            success: function (data) {
                const widthStyle = `width: ${origWindowWidth * 0.9}px`;
                $('#ajaxContentParent').attr('style', widthStyle);
                $('#ajaxContent').replaceWith(data);
                console.log('fully loaded svg. attaching tooltips...');
                loadTooltips();
            },
            cache: false,
        });
    }

    let loadTooltips = () => {
        console.log('possibly loading tooltips!');
        let tooltips = {
            'coal-1': '<p>559,899,524 tons <br />Lance Formation</p>',
            'coal-2': '<p>429,875,587   tons <br />Williams Fork Formation</p>',
            'coal-3': '<p>309,015,641 tons <br />Vermejo Formation</p>',
            'coal-4': '<p>136,924,749 tons <br />Laramie Formation</p>',
            'coal-5': '',
            'coal-6': '<p>19,256,014 tons <br />Menefee Formation</p>',
        }
        $('.hoverthing').each(function (idx, elm) {
            console.log('attatching tooltip to hoverthing:', idx);
            $(elm).attr('data-tippy', tooltips[elm.id]);
        });
        console.log('attached all tooltips. Now loading the tooltip library.');
        $.getScript('https://unpkg.com/tippy.js@3/dist/tippy.all.min.js');
        console.log('loaded tooltip lib. should work now?');
    }

    let postLoadStuff = () => {
        origWindowWidth = window.innerWidth;
        loadMondoSvg();
    }

    Webflow.push(function () {
        $(document).ready(() => postLoadStuff());
    });
</script>